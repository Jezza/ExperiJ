apply plugin: 'java'

project.version = "0.2"

repositories {
    mavenCentral()
}

dependencies {
	testCompile 'junit:junit:4.12'
}

jar {
	version = project.version
	classifier = "dev"
	manifest {
		attributes("Manifest-Version": "1.0", "Agent-Class": "me.jezza.ExperiJ", "Premain-Class": "me.jezza.ExperiJ")
	}
}

test {
	jvmArgs "-javaagent:" + jar.archivePath, "-Dexperij.debug=true", "-Dexperij.whitelist=\"jezza\""
}

// Source jar
task srcJar(type: Jar) {
	from sourceSets.main.allSource
	version = project.version
	classifier = "src"
}

artifacts {
    archives srcJar
}